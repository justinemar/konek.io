!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){function n(e,t){if(0==e)return"0 Bytes";var n=t||2,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}!function(){const e=io("/");window.addEventListener("DOMContentLoaded",t=>{new ClipboardJS(".clip");const a=document.getElementById("sess-uid"),o=document.getElementById("text-area"),d=document.getElementById("file-input"),s=document.getElementsByClassName("connection-files")[0],r=document.getElementsByClassName("files-container")[0];e.emit("join",a.innerText),e.on("updateClients",function(e){document.getElementById("clients-count").innerHTML=Object.keys(e).length}),e.on("updateText",function(e){const t=Math.random().toString(36).substring(7),n=document.createElement("div");n.classList.add("row","message");const a=document.createElement("div");a.classList.add("one-half","columns","messages");const o=document.createElement("p");o.innerText=e.data.text,o.setAttribute("id",t);const d=document.createElement("span");d.classList.add("clip"),d.setAttribute("data-clipboard-target",`#${t}`),n.appendChild(a),a.appendChild(o),a.appendChild(d);const s=document.createElement("i");s.classList.add("fa","fa-copy"),s.setAttribute("aria-hidden","true"),d.appendChild(s),r.prepend(n)}),e.on("updateFiles",function(e){const t=document.createElement("div");t.classList.add("row");const a=document.createElement("div");a.classList.add("one-half","columns");const o=document.createElement("h3");o.innerText=e.data.fileName;const d=document.createElement("span");d.innerText=n(e.data.size);const s=document.createElement("a");s.classList.add("button","download"),s.innerText="Download",s.setAttribute("href",`data:${e.data.contentType};base64,${e.data.image}`),s.setAttribute("download",e.data.fileName),t.appendChild(a),a.appendChild(o),a.appendChild(d),a.appendChild(s),r.prepend(t)}),d.onchange=function(e){var t=this.files;console.log(t[0]);var n=t[0].name;o.readOnly=!0,o.value=n},s&&s.addEventListener("submit",function(t){if(t.preventDefault(),d.files.length<=0)return fetch("/share/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t.target.text.value})}).then(e=>{if(!e.ok)throw new Error("Unable to process network request this time.");return e.json()}).then(t=>{const n=Math.random().toString(36).substring(7);e.emit("newText",{session:a.innerText,data:t});const o=document.createElement("div");o.classList.add("row");const d=document.createElement("div");d.classList.add("one-half","columns","messages");const i=document.createElement("p");i.innerText=t.data.text,i.setAttribute("id",n);const c=document.createElement("span");c.classList.add("clip"),c.setAttribute("data-clipboard-target",`#${n}`),o.appendChild(d),d.appendChild(i),d.appendChild(c);const l=document.createElement("i");l.classList.add("fa","fa-copy"),l.setAttribute("aria-hidden","true"),c.appendChild(l),r.prepend(o),s.reset()}).catch(e=>alert(e));const i=new FormData;i.append("sessionFile",d.files[0]),fetch("/share/file",{method:"POST",body:i}).then(e=>{if(!e.ok)throw new Error("Unable to process: File might be too large.");return e.json()}).then(t=>{e.emit("newFile",{session:a.innerText,data:t});const d=document.createElement("div");d.classList.add("row");const i=document.createElement("div");i.classList.add("one-half","columns");const c=document.createElement("h3");c.innerText=t.data.fileName;const l=document.createElement("span");l.innerText=n(t.data.size);const u=document.createElement("a");u.classList.add("button","download"),u.innerText="Download",u.setAttribute("href",`data:${t.data.contentType};base64,${t.data.image}`),u.setAttribute("download",t.data.fileName),d.appendChild(i),i.appendChild(c),i.appendChild(l),i.appendChild(u),r.prepend(d),o.readOnly=!1,s.reset()}).catch(e=>alert(e))})})}()}]);